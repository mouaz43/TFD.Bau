<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Galerie — TFD</title>
  <link rel="stylesheet" href="/assets/css/styles.css">
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 96 96'%3E%3Cpath d='M48 10L82 70H14Z' fill='none' stroke='%23ffffff55' stroke-width='2'/%3E%3Cpath d='M28 42H68' stroke='%23FF5C00' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M48 30V64' stroke='%232B5BD3' stroke-width='6' stroke-linecap='round'/%3E%3C/svg%3E">
  <style>
    html, body { height:100%; }
    body.logo-bg::before{content:"";position:fixed;z-index:-1;top:10vh;left:50%;transform:translateX(-50%);width:72vmin;height:72vmin;pointer-events:none;opacity:.06;background-repeat:no-repeat;background-size:contain;background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 200 200'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0' y1='0' x2='1' y2='1'%3E%3Cstop offset='0%25' stop-color='%23FF5C00'/%3E%3Cstop offset='100%25' stop-color='%232B5BD3'/%3E%3C/linearGradient%3E%3C/defs%3E%3Cg%3E%3Cpolygon points='100,18 172,60 172,140 100,182 28,140 28,60' fill='none' stroke='%23ffffff' stroke-opacity='0.35' stroke-width='3'/%3E%3Cpath d='M52 92 H148' stroke='url(%23g)' stroke-width='10' stroke-linecap='round'/%3E%3Cpath d='M100 66 V134' stroke='url(%23g)' stroke-width='10' stroke-linecap='round'/%3E%3Cpath d='M136 80 V134' stroke='%23ffffff' stroke-opacity='0.8' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M118 102 H152' stroke='%23ffffff' stroke-opacity='0.8' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M122 120 H148' stroke='%23ffffff' stroke-opacity='0.8' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M64 80 V134' stroke='%23ffffff' stroke-opacity='0.8' stroke-width='6' stroke-linecap='round'/%3E%3Cpath d='M64 84 C88 84, 88 130, 64 130' fill='none' stroke='%23ffffff' stroke-opacity='0.8' stroke-width='6' stroke-linecap='round'/%3E%3C/g%3E%3C/svg%3E");filter:saturate(120%) contrast(110%);}
    .hero, main { position:relative; }
  </style>
</head>
<body class="logo-bg">
  <nav class="nav"><div class="container bar">
    <div class="brand">
      <svg class="logo-svg" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><defs><linearGradient id="beam" x1="0" y1="0" x2="1" y2="1"><stop offset="0%" stop-color="#FF5C00"/><stop offset="100%" stop-color="#2B5BD3"/></linearGradient></defs><polygon points="100,18 172,60 172,140 100,182 28,140 28,60" fill="none" stroke="rgba(255,255,255,.26)" stroke-width="2"/><path d="M52 92 H148" stroke="url(#beam)" stroke-width="14" stroke-linecap="round"/><path d="M100 62 V138" stroke="url(#beam)" stroke-width="14" stroke-linecap="round"/><path d="M136 76 V138" stroke="#fff" stroke-width="8" stroke-linecap="round" opacity=".95"/><path d="M118 100 H152" stroke="#fff" stroke-width="8" stroke-linecap="round" opacity=".95"/><path d="M122 120 H148" stroke="#fff" stroke-width="8" stroke-linecap="round" opacity=".95"/><path d="M64 76 V138" stroke="#fff" stroke-width="8" stroke-linecap="round" opacity=".95"/><path d="M64 80 C92 80, 92 134, 64 134" stroke="#fff" stroke-width="8" fill="none" stroke-linecap="round" opacity=".95"/></svg>
      <strong>TFD</strong>
    </div>
    <div class="menu"><a href="/index.html">Start</a><a href="/leistungen.html">Leistungen</a><a href="/galerie.html">Galerie</a><a href="/faq.html">FAQ</a><a class="cta" href="/kontakt.html">Kontakt</a></div>
  </div></nav>

  <main class="container">
    <section class="section">
      <div class="row">
        <h1>Vorher/Nachher Galerie</h1>
        <select id="filter" class="btn" onchange="renderGallery(this.value)">
          <option value="alle">Alle Kategorien</option>
          <option value="innenausbau">Innenausbau</option>
          <option value="trockenbau">Trockenbau</option>
          <option value="bodenleger">Bodenleger</option>
          <option value="gartenarbeit">Gartenarbeit</option>
        </select>
      </div>
      <div id="gallery" class="grid" style="grid-template-columns:1fr; gap:20px"></div>
    </section>
  </main>

  <footer class="footer"><div class="container">© <span id="year"></span> TFD · <a href="/legal/impressum.html">Impressum</a> · <a href="/legal/datenschutz.html">Datenschutz</a></div></footer>

  <script src="/assets/js/main.js"></script>
  <script src="/assets/js/ba-slider.js"></script>
  <script>
    async function fetchProjects(){ const res = await fetch('/content/projects.json'); return await res.json(); }
    function baCard(project, idx){
      return `<div class="card">
        <div class="row"><strong>${project.title}</strong><span class="muted">${project.location}</span></div>
        <div class="ba" id="ba_${idx}">
          <img src="${project.before}" alt="Before">
          <div class="top"><img src="${project.after}" alt="After"></div>
          <div class="handle"></div>
          <div class="labels"><span>Vorher</span><span>Nachher</span></div>
        </div>
        <div class="muted" style="margin-top:8px">${(project.metrics?.qm||'?')} m² · ${(project.metrics?.dauer_tage||'?')} Tage</div>
      </div>`;
    }
    async function renderGallery(filter='alle'){
      const mount = document.getElementById('gallery');
      const data = await fetchProjects();
      const list = data.filter(p => filter==='alle' ? true : p.category===filter);
      mount.innerHTML = list.map((p,i)=>baCard(p,i)).join('');
      list.forEach((p,i)=> initBASlider('ba_'+i, 50));
    }
    renderGallery('alle');
  </script>
</body>
</html>
